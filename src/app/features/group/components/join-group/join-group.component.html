<div class="join-going-component">
  <ng-container *ngIf="loading">Loading...</ng-container>
  <ng-container *ngIf="!loading && group && link">
    <ng-template [ngIf]="user" [ngIfElse]="userIsNotSignedIn">
    <mat-card>
      <mat-card-header>
        <mat-card-title>
          {{group.name}}
        </mat-card-title>
        <mat-card-subtitle>
          Join the group
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div>
          <p>Members: </p>
          <ul>
            <li *ngFor="let member of group.members">
              <app-display-name [userId]="member"></app-display-name>
            </li>
          </ul>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-stroked-button color="accent" (click)="join()">Join</button>
        <button mat-button color="warn" (click)="cancel()">Cancel</button>
      </mat-card-actions>
    </mat-card>
    </ng-template>
    <ng-template #userIsNotSignedIn>
      <mat-card>
        <mat-card-header>
          <mat-card-title>You are not signed in</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>Click the link below to be either signed in or be registered in the system</p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button color="accent" (click)="loginWithGoogle()">Login with Google</button>
        </mat-card-actions>
      </mat-card>
    </ng-template>
  </ng-container>
</div>
